#include <stdio.h>
#include <math.h>
#include <string.h>
#include <stdlib.h>


const int			NUM_ELEMENTS = 128*1024;
const int			ELEMENT = NUM_ELEMENTS/2;
const float			TOL = 0.001f;

float hA[NUM_ELEMENTS]  __attribute__((align(64)));
float hB[NUM_ELEMENTS]  __attribute__((align(64)));

int				LookAtTheBits( float );


int
main( int argc, char *argv[ ] )
{
	for( int i = 0; i < NUM_ELEMENTS; i++ )
	{
		hA[i] = (float)i;
	}

	hB[:] = sqrtf( hA[:] );

	for( int i = ELEMENT; i <= ELEMENT+64; i++ )
	{
		float e = sqrtf( hA[i] );

		fprintf( stderr, "%6d:    %13.6f (0x%08x)      %13.6f (0x%08x)\n", i,
			hB[i], LookAtTheBits(hB[i]),
			e, LookAtTheBits(e) );
	}

	return 0;
}


int
LookAtTheBits( float fp )
{
	int *ip = (int *)&fp;
	return *ip;
}

#ifdef XEON
		Vector sqrt			Scalar sqrt
 65536:       255.999985 (0x437fffff)         256.000000 (0x43800000)
 65537:       256.001953 (0x43800040)         256.001953 (0x43800040)
 65538:       256.003906 (0x43800080)         256.003906 (0x43800080)
 65539:       256.005859 (0x438000c0)         256.005859 (0x438000c0)
 65540:       256.007812 (0x43800100)         256.007812 (0x43800100)
 65541:       256.009766 (0x43800140)         256.009766 (0x43800140)
 65542:       256.011719 (0x43800180)         256.011719 (0x43800180)
 65543:       256.013672 (0x438001c0)         256.013672 (0x438001c0)
 65544:       256.015625 (0x43800200)         256.015625 (0x43800200)
 65545:       256.017548 (0x4380023f)         256.017578 (0x43800240)
 65546:       256.019501 (0x4380027f)         256.019531 (0x43800280)
 65547:       256.021454 (0x438002bf)         256.021484 (0x438002c0)
 65548:       256.023407 (0x438002ff)         256.023438 (0x43800300)
 65549:       256.025360 (0x4380033f)         256.025391 (0x43800340)
 65550:       256.027313 (0x4380037f)         256.027344 (0x43800380)
 65551:       256.029266 (0x438003bf)         256.029297 (0x438003c0)
 65552:       256.031219 (0x438003ff)         256.031250 (0x43800400)
 65553:       256.033173 (0x4380043f)         256.033203 (0x43800440)
 65554:       256.035126 (0x4380047f)         256.035156 (0x43800480)
 65555:       256.037079 (0x438004bf)         256.037109 (0x438004c0)
 65556:       256.039032 (0x438004ff)         256.039062 (0x43800500)
 65557:       256.040985 (0x4380053f)         256.041016 (0x43800540)
 65558:       256.042938 (0x4380057f)         256.042969 (0x43800580)
 65559:       256.044891 (0x438005bf)         256.044922 (0x438005c0)
 65560:       256.046844 (0x438005ff)         256.046875 (0x43800600)
 65561:       256.048828 (0x43800640)         256.048828 (0x43800640)
 65562:       256.050781 (0x43800680)         256.050781 (0x43800680)
 65563:       256.052734 (0x438006c0)         256.052734 (0x438006c0)
 65564:       256.054688 (0x43800700)         256.054688 (0x43800700)
 65565:       256.056641 (0x43800740)         256.056641 (0x43800740)
 65566:       256.058594 (0x43800780)         256.058594 (0x43800780)
 65567:       256.060547 (0x438007c0)         256.060547 (0x438007c0)
 65568:       256.062500 (0x43800800)         256.062500 (0x43800800)
 65569:       256.064453 (0x43800840)         256.064453 (0x43800840)
 65570:       256.066406 (0x43800880)         256.066406 (0x43800880)
 65571:       256.068359 (0x438008c0)         256.068359 (0x438008c0)
 65572:       256.070312 (0x43800900)         256.070312 (0x43800900)
 65573:       256.072266 (0x43800940)         256.072266 (0x43800940)
 65574:       256.074219 (0x43800980)         256.074219 (0x43800980)
 65575:       256.076172 (0x438009c0)         256.076172 (0x438009c0)
 65576:       256.078125 (0x43800a00)         256.078125 (0x43800a00)
 65577:       256.080078 (0x43800a40)         256.080078 (0x43800a40)
 65578:       256.082031 (0x43800a80)         256.082031 (0x43800a80)
 65579:       256.083984 (0x43800ac0)         256.083984 (0x43800ac0)
 65580:       256.085938 (0x43800b00)         256.085938 (0x43800b00)
#endif
#ifdef XEON_PHI
 65536:       256.000000 (0x43800000)         256.000000 (0x43800000)
 65537:       256.001953 (0x43800040)         256.001953 (0x43800040)
 65538:       256.003906 (0x43800080)         256.003906 (0x43800080)
 65539:       256.005859 (0x438000c0)         256.005859 (0x438000c0)
 65540:       256.007812 (0x43800100)         256.007812 (0x43800100)
 65541:       256.009766 (0x43800140)         256.009766 (0x43800140)
 65542:       256.011719 (0x43800180)         256.011719 (0x43800180)
 65543:       256.013672 (0x438001c0)         256.013672 (0x438001c0)
 65544:       256.015625 (0x43800200)         256.015625 (0x43800200)
 65545:       256.017578 (0x43800240)         256.017578 (0x43800240)
 65546:       256.019531 (0x43800280)         256.019531 (0x43800280)
 65547:       256.021484 (0x438002c0)         256.021484 (0x438002c0)
 65548:       256.023438 (0x43800300)         256.023438 (0x43800300)
 65549:       256.025391 (0x43800340)         256.025391 (0x43800340)
 65550:       256.027344 (0x43800380)         256.027344 (0x43800380)
 65551:       256.029297 (0x438003c0)         256.029297 (0x438003c0)
 65552:       256.031250 (0x43800400)         256.031250 (0x43800400)
 65553:       256.033203 (0x43800440)         256.033203 (0x43800440)
 65554:       256.035156 (0x43800480)         256.035156 (0x43800480)
 65555:       256.037109 (0x438004c0)         256.037109 (0x438004c0)
 65556:       256.039062 (0x43800500)         256.039062 (0x43800500)
 65557:       256.041016 (0x43800540)         256.041016 (0x43800540)
 65558:       256.042969 (0x43800580)         256.042969 (0x43800580)
 65559:       256.044922 (0x438005c0)         256.044922 (0x438005c0)
 65560:       256.046875 (0x43800600)         256.046875 (0x43800600)
 65561:       256.048828 (0x43800640)         256.048828 (0x43800640)
 65562:       256.050781 (0x43800680)         256.050781 (0x43800680)
 65563:       256.052734 (0x438006c0)         256.052734 (0x438006c0)
 65564:       256.054688 (0x43800700)         256.054688 (0x43800700)
 65565:       256.056641 (0x43800740)         256.056641 (0x43800740)
 65566:       256.058594 (0x43800780)         256.058594 (0x43800780)
 65567:       256.060547 (0x438007c0)         256.060547 (0x438007c0)
 65568:       256.062500 (0x43800800)         256.062500 (0x43800800)
 65569:       256.064453 (0x43800840)         256.064453 (0x43800840)
 65570:       256.066406 (0x43800880)         256.066406 (0x43800880)
 65571:       256.068359 (0x438008c0)         256.068359 (0x438008c0)
 65572:       256.070312 (0x43800900)         256.070312 (0x43800900)
 65573:       256.072266 (0x43800940)         256.072266 (0x43800940)
 65574:       256.074219 (0x43800980)         256.074219 (0x43800980)
 65575:       256.076172 (0x438009c0)         256.076172 (0x438009c0)
 65576:       256.078094 (0x438009ff)         256.078094 (0x438009ff)
 65577:       256.080048 (0x43800a3f)         256.080048 (0x43800a3f)
 65578:       256.082031 (0x43800a80)         256.082031 (0x43800a80)
 65579:       256.083984 (0x43800ac0)         256.083984 (0x43800ac0)
 65580:       256.085938 (0x43800b00)         256.085938 (0x43800b00)
#endif
